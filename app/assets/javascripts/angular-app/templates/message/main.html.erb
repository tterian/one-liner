<share-toolbar></share-toolbar>

<div class="md-main-content" layout="row">

  <span flex="10"></span>

  <span ng-hide="user.signedIn" flex="20"></span>
  <div  ng-show="user.signedIn" class="md-user" flex="20" flex-xs="100" layout="column">
    <md-card>

      <md-list>
        <md-subheader class="md-no-sticky">Conversations</md-subheader>
        <md-list-item class="md-3-line" ng-repeat="conversation in conversations | orderBy:'-id' track by $index"
                                        ng-click="getConversation(conversation.id)">
          <img ng-src="{{conversation.image}}" class="md-avatar" alt="{{conversation.image}}" />
          <div class="md-list-item-text" layout="column">
            <p>{{conversation.subject}}</p>
          </div>
          <md-divider ></md-divider>
        </md-list-item>
      </md-list>

    </md-card>

  </div>  

  <md-card class="md-messages" flex="40" flex-xs="100" layout="column">
    
    <md-list>
      <md-subheader class="md-no-sticky">Messages</md-subheader>
      <md-list-item class="md-3-line" ng-repeat="message in messages | orderBy:'id'">
        <img ng-src="{{message.image}}" class="md-avatar" alt="{{message.owner}}" />
        <div class="md-list-item-text" layout="column">
          <h3>{{message.subject}}</h3>
          <h4>{{message.body}}</h4>
        </div>
        <md-divider ></md-divider>
      </md-list-item>
    </md-list>

    <div ng-show="messages" layout="row">
      <img ng-src="{{user.image}}" class="md-poster-avatar" alt="{{user.id}}" />

      <md-input-container flex="90" md-no-float class="md-block">
        <input ng-model="message.body" type="text" placeholder="Reply to message"
               ng-keypress="($event.charCode==13)?replyToMessage(conversation.id, message):return">
      </md-input-container>

    </div>

  </md-card>

  <follow-suggestions></follow-suggestions>
  <sign-in-box></sign-in-box>

</div>